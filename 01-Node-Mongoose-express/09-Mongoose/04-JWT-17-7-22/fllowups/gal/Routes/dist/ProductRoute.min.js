"use strict";exports.__esModule=!0;var express_1=require("express"),ProductCont_1=require("../Conts/ProductCont"),jwt_simple_1=require("jwt-simple"),router=express_1.default.Router();function isAdmin(e,r,o){try{var t=e.cookies.user;if(!t)throw new Error("no cookie on path");var s=process.env.JWT_SECRET;if(!s)throw new Error("no secred code");var u=jwt_simple_1.default.decode(t,s);console.log(u),"admin"!==u.role?r.status(403).send({error:"Not authorized"}):o()}catch(e){r.send({error:e.message})}}router.get("/get-my-products",ProductCont_1.getMyProducts,isAdmin),exports.default=router;